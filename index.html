<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>Esteganálise em imagens</title>

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/beige.css">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

		<link rel="stylesheet" href="custom.css">

	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section>
					<h2>Uma Análise Comparativa de Ferramentas de Esteganálise em Estego-Imagens com Texto Embutido</h2>
					<div>
						<p>
							<b>Autor:</b> Lucas Caetano Possatti<br/>
							<b>Orientadora:</b> Profª. Drª. Karin Satie Komati<br/>
							<b>Coorientador:</b> Prof. Dr. Jefferson Oliveira Andrade
						</p>
					</div>
				</section>

				<!-- Esteganografia -->

				<section data-markdown>
					<script type="text/template">
						## Esteganografia
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
						- Esconder uma mensagem dentro de outra.
						- Esteganografia \\(\neq\\) Criptografia.
						<!-- Esteganografia esconde a comunicação. -->
						<!-- Apesar de serem usadas juntas. -->
					</script>
				</section>
				<section>
					<img src="img/classifica2.png">
				</section>
				<section data-markdown>
					<script type="text/template">
						### Técnicas de esteganografia
						- Domínio espacial (e.g. LSB).
						<!-- Manipulam os píxeis. -->
						- Domínio de transformação (e.g. DCT).
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
						### Domínio espacial
						<!-- Manipulam os píxeis. -->
						- **Least Significant Bit (LSB)**
						- *Matrix Embedding*
						- *Pixel-value-based image hiding*
						- *Difference Expansion* (DE)
						- *Histogram modification*
						- *Predicted based image hiding*
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
						### *Least Significant Bit* (LSB)
						- Bit menos significativo.
						- Altera pouco a imagem.
						- Exemplo:
							- 1001110<span class="destaque">1</span>
							- 1001110<span class="destaque">0</span>
						<!-- Embutir 100% faz com que as frequências dos PoVs se aproximem -->
						<!-- - Não funciona em JPEG. -->
							<!-- - A compressão atrapalha a técnica. -->
							<!-- - Pode ser detectada facilmente (devido a quantização). -->
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
						<!-- Entra no anterior como um único tópico. -->
						### Variações do LSB
						- Usar os outros planos de bit:
							- 1001110<span class="destaque">1</span>
							- 100111<span class="destaque">01</span>
							- 10011<span class="destaque">101</span>
						- LSB não-sequencial.
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
						### Domínio de transformação
						- Usada também para criar marcas d'água.
						- Possíveis transformações:
							- *Discrete Cosine Transform* (DCT)
							- *Discrete Wavelet Transform* (DWT)
							- *Discrete Fourier Transform* (DFT)
						- O formato JPEG usa DCTs.
						<!-- Usa DCT em blocos de 8x8 píxeis para  -->
					</script>
				</section>

				<!-- Esteganálise -->

				<section data-markdown>
					<script type="text/template">
						## Esteganálise
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
						- Busca detectar a presença de esteganografia.
						- Alguns dos principais métodos:
							- Ataque Visual
							- Chi Square
							- RS Analysis
							- Primary Sets
							- Sample Pair
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
					### Chi Square
					- Análise de *Pair of Values* (PoV).
					- Exemplo de PoV:
						- 1001110<span class="destaque">1</span>
						- 1001110<span class="destaque">0</span>
					- A esteganografia LBS modifica as frequências do PoV.
						- As frequências se igualam.
					- Mais útil para detectar esteganografia LSB sequencial.
					</script>
				</section>
				<section>
					<img src="img/westfeld-histogram.png">
				</section>
				<section data-markdown>
					<script type="text/template">
						### RS Analysis
						- Detecta quando os bits são espalhados pela esteganograma.
						- Afirma que embutir 0,005 bits por píxel é seguro.
					</script>
				</section>
				<section>
						<h3>Funcionamento do RS Analysis</h3>
						<ul>
							<li>Suponhamos uma imagem de \( M \times N \) píxeis.</li>
							<li>Cada píxel tem um valor pertencente à \(P = \{0,\ldots,255\}\).</li>
							<li>Criação de grupos disjuntos com \(n\) píxeis adjacentes \((x_1, \ldots, x_n)\).</li>
							<li>Para \(n = 4\), \(G = (x_1, x_2, x_3, x_4)\).</li>
						</ul>
				</section>
				<section>
						<h3>Funcionamento do RS Analysis</h3>
						<ul>
							<li>Definimos uma função de discriminação \(f\).</li>
							<li>\(f\) é usada para definir quão <i>suave</i> é o grupo.</li>
							<!-- Quanto maior o valor, mais irregular é o grupo. -->
						</ul>
						<p>
							$$f(x_1, x_2,..., x_n) = \sum_{i=1}^{n-1} |x_{i+1} - x_i|$$
						</p>
						<ul>
							<li>Exemplos:</li>
							<ul>
								<li>\(f (1, 0, 1, 0) = 3\)</li>
								<li>\(f (11, 22, 55, 33) = 66\)</li>
								<li>\(f (233, 233, 233, 233) = 0\)</li>
							</ul>
						</ul>
				</section>
				<section>
						<h3>Funcionamento do RS Analysis</h3>
						<ul>
							<li>Definimos uma função de <i>flipping</i> (inversão), chamada \(F\).</li>
							<li>\(F (F (x)) = x\)</li>
							<li>\(F_1: 0 \leftrightarrow 1, 2 \leftrightarrow 3, ..., 254 \leftrightarrow 255\)</li>
							<!-- F_1 transforma pares em ímpares. -->
							<li>\(F_{-1}: -1 \leftrightarrow 0, 1 \leftrightarrow 2, ..., 255 \leftrightarrow 256\)</li>
							<li>\(F_0(x) = x\)</li>
						</ul>
				</section>
				<section>
						<h3>Funcionamento do RS Analysis</h3>
						<ul>
							<li>Grupos regulares: \(G \in R \leftrightarrow f(F(G)) > f(G)\)</li>
							<li>Grupos singulares: \(G \in S \leftrightarrow f(F(G)) < f(G)\)</li>
							<li>Grupos inutilizáveis: \(G \in U \leftrightarrow f(F(G)) = f(G)\)</li>
							<li>Exemplo de grupo regular: \((1, 2, 3, 4)\)</li>
							<ul>
								<li>\(f(1, 2, 3, 4) = 3\)</li>
								<li>Após <i>flipping</i> \((F_1)\) fica mais irregular: \((0, 3, 2, 5)\).</li>
								<li>\(f(0, 3, 2, 5) = 7\)</li>
							</ul>
						</ul>
				</section>
				<section>
						<h3>Funcionamento do RS Analysis</h3>
						<ul>
							<li>Máscaras aplicam diferentes transformações nos componentes de um grupo.</li>
							<li>Exemplo: $$M = (-1,0,1,0)$$</li>
							<li>É possível usar máscaras diferentes.</li>
						</ul>
				</section>
				<section>
						<h3>Funcionamento do RS Analysis</h3>
						<ul>
							<li>Inverter os LSBs de uma imagem típica, torna seus grupos mais irregulares.</li>
							<li class="destaque">Revisar depois...</li>
						</ul>
				</section>
				<section>
						<h3>Funcionamento do RS Analysis</h3>
						<ul>
							<!-- JOA: Porcentagens relativas -->
							<li>\(R_M\) é o número relativo de grupos regulares para a máscara \(M\).</li>
							<li>\(S_M\) é o número relativo de grupos singulares.</li>
							<li>\(R_M\) e \(S_M\) são porcentagens relativas ao total de grupos.</li>
							<li>\((R_M + S_M) \leq 1\) e \((R_{-M} + S_{-M}) \leq 1\)</li>
							<li>Em uma imagem típica: $$R_M \cong R_{-M} \text{ e } S_M \cong S_{-M}$$</li>
							<li>Porém essa equação é violada ao randomizar o plano LSB.</li>
							<li>Pois a diferença de \(R_M\) e \(S_M\) cai para zero.</li>
						</ul>
				</section>
				<section>
						<h3>Funcionamento do RS Analysis</h3>
						<ul>
							<li>Após randomizar 50% do plano LSB (embutindo 100% dos LSBs): $$R_M \cong S_M$$</li>
							<li>Enquanto a diferença entre \(R_{-M}\) e \(S_{-M}\) aumenta.</li>
						</ul>
				</section>
				<section>
					<img src="img/fridrich--reliable--rs-diagram.png">
				</section>
				<section>
						<h3>Funcionamento do RS Analysis</h3>
						<ul>
							<!-- <li>O RS Analysis funciona estimando as curvas da imagem.</li> -->
							<!-- <li>E calculando as interseções entre elas.</li> -->
							<li>Medindo o número de grupos \(R\) e \(S\), obtemos os pontos:
							$$R_M(p/2) \text{, } S_M(p/2) \text{, } R_{-M}(p/2) \text{, e } S_{-M}(p/2)$$</li>
							<li>\(p\) é o tamanho da mensagem (porcentagem do nº de píxeis).</li>
							<li>Fazemos o <i>flipping</i> de <b>todos</b> os LSBs.</li>
							<li>Calculando \(R\) e \(S\) novamente, obtemos os pontos:
							$$R_M(1-p/2) \text{, } S_M(1-p/2) \text{, } R_{-M}(1-p/2) \text{, e } S_{-M}(1-p/2)$$</li>
							<!-- Caracaaaas, entendi a parte abaixo agora. -->
							<li>Para calcular \(R_M(1/2)\) e \(S_M(1/2)\):</li>
							<ul>
								<li>Randomizamos o plano LSB.</li>
								<li>Medimos \(R_M(1/2)\) e \(S_M(1/2)\).</li>
								<li>Repetimos esse processo esse processo várias vezes.</li>
								<li>Estimamos \(R_M(1/2)\) e \(S_M(1/2)\) estatisticamente pelos cálculos anteriores.</li>
							</ul>
						</ul>
				</section>
				<section>
						<h3>Funcionamento do RS Analysis</h3>
						<ul>
							<li>Para encurtar o processo de cálculo do \(R_M(1/2)\) e \(S_M(1/2)\), assumimos:</li>
							<ol>
								<li>O ponto de intercessão das curvas de \(R_M\) e \(R_{-M}\) tem a mesma coordenada \(x\) que o ponto de intercessão das curvas \(S_M\) e \(S_{-M}\).</li>
								<!-- Interseções da extrema esquerda. -->
								<li>As curvas \(R_M\) e \(S_{M}\) se intersedem em \(m=50\%\) </li>
							</ol>
							<li>Essas suposições (<i>assumptions</i>) permitem usarmos uma fórmula menos trabalhosa para calcular \(p\).</li>
						</ul>
				</section>
				<section>
						<h3>Funcionamento do RS Analysis</h3>
						<ul>
							<li>Reescalamos o eixo \(x\) para que \(p/2\) se torne 0 e \(100\%-p/2\) se torne 1.</li>
							<li>
								A coordenada \(x\) da intersessão é a raíz de:
								$$2(d_1+d_0)x^2 + (d_{-0}-d_{-1}-d_{1}-3d_{0})x + d_{0} - d_{-0} = 0$$
							</li>
							<li>
								Onde:
								$$d_{0} = R_{M}(p/2) - S_{M}(p/2)$$
								$$d_{-0} = R_{-M}(p/2) - S_{-M}(p/2)$$
								$$d_{1} = R_{M}(1-p/2) - S_{M}(1-p/2)$$
								$$d_{-1} = R_{-M}(1-p/2) - S_{-M}(1-p/2)$$
							</li>
							<li>
								E calculamos \(p\):
								$$p = x / (x-1/2)$$
							</li>
						</ul>
				</section>
				<section>
						<h3>Funcionamento do RS Analysis</h3>
						<ul>
							<li>Para implementar o RS Analysis, precisamos definir:</li>
							<ol>
								<li>Tamanho \(n\) dos grupos.</li>
								<li>Qual máscara utilizar.</li>
							</ol>
						</ul>
				</section>
				<section data-markdown>
					<script type="text/template">
						### Primary Sets
						- ...
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
						### Sample Pair
						- ...
					</script>
				</section>

				<!-- Curvas ROC -->

				<section data-markdown>
					<script type="text/template">
						## Curvas ROC
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
						## Ferramentas utilizadas
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
						### Ferramentas de esteganografia
						- Outguess
						- Steghide
						- StegExpose
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
						### Ferramentas de esteganálise
						- StegExpose
						- ~~Stegdetect~~ <!-- .element: class="fragment" -->
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
						### Banco de Imagens
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
						- Usamos a API do Pixabay.
						- Todas as imagens são Creative Commons CC0.
						- Usamos nomes de países para buscar imagens.
						- Recortamos todas as imagens para 400x400.
						- Criamos cópias das imagens JPEG para PNG.
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
						### Textos Utilizados
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
						- Usamos livros do [Project Guttenberg](http://www.gutenberg.org/).
						- Baixamos 15 livros da lista dos [100 mais baixados](http://www.gutenberg.org/browse/scores/top).
						- Todos os livros em `txt`.
						- Concatenamos todos os livros em um único arquivo.
						- Extraíamos os bytes necessários desses livros quando fazíamos os embutimentos.
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
						### Ambiente de Testes
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
						- Para cada ferramenta de esteganografia:
							- Estimamos a capacidade esteganográfica.
							-	Criamos 10 estego-imagens com diferentes tamanhos de mensagem (10% à 100% da capacidade).
						- Analisamos todas as imagens usando o StegExpose.
					</script>
				</section>
				<section>
					<img src="img/processo.png">
				</section>
				<!-- <section>
										<img src="img/processo.png" style="background-color:white;">
				</section> -->
				<section data-markdown>
					<script type="text/template">
						<!-- - Disponível em [github.com/possatti/bsi-tcc](http://github.com/possatti/bsi-tcc). -->
						- `embed.sh` faz os embutimentos.
						- `Makefile` centraliza as tarefas.
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
						```bash
						# Cria estego-imagens usando o programa especificado.
						make outguess
						make steghide
						make f5
						make lsbsteg
						make stepic

						# Gera relatórios do StegExpose.
						make stegexpose

						# Todas as etapas acima.
						make all
						```
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
						## Resultados
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
						- Aplicamos os embutimentos.
						- Usamos o StegExpose com o threshold padrão (0.2).
						<!-- - Processamos os relatórios para gerar tabelas e gráficos. -->
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
						<!-- Número de imagens detectadas (threshold de 0.2) -->
						|          | F5 | Steghide | Outguess | Stepic | LSBSteg |
            |:--------:|:--:|:--------:|:--------:|:------:|:-------:|
            | **0%**   | 1  | 1        | 1        | 0      | 0       |
            | **10%**  | 0  | 1        | 0        | 1      | 0       |
            | **20%**  | 0  | 1        | 0        | 1      | 1       |
            | **30%**  | 0  | 1        | 1        | 3      | 3       |
            | **40%**  | 0  | 1        | 0        | 6      | 11      |
            | **50%**  | 0  | 1        | 0        | 10     | 17      |
            | **60%**  | 0  | 0        | 1        | 15     | 20      |
            | **70%**  | 0  | 0        | 0        | 18     | 23      |
            | **80%**  | 0  | 1        | 0        | 22     | 26      |
            | **90%**  | 0  | 0        | 0        | 24     | 28      |
            | **100%** | 0  | 1        | 0*       | 26     | 29      |
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
						### Considerações
						- O Outguess falhou ao gerar algumas imagens para 100%.
						<!-- (a capacidade da imagem foi estourada) -->
						- Total de 30 imagens para cada célula.
						- Apenas esteganografia LSB foi detectada.
						- A partir de 60%, metade das imagens foram detectadas.
					</script>
				</section>
				<section>
					<img src="resultados/grafico-imagens-detectadas.png">
				</section>
				<section data-markdown>
					<script type="text/template">
						### Geração das curvas ROC
						- Formada pela variação do threshold.
						- Usamos o *score* da fusão para gerar os pontos.
						- Threshold menor \\(\implies\\) mais falsos positivos.
						- Threshold maior \\(\implies\\) menos verdadeiros positivos.
					</script>
				</section>
				<!-- resultados/rocs-threshold-0-05.png  resultados/rocs-threshold-0-1.png  resultados/rocs-threshold-0-2.png -->

				<section>
					<img src="resultados/rocs-threshold-0-2.png">
				</section>
				<section>
					<img src="resultados/rocs-threshold-0-1.png">
				</section>
				<section>
					<img src="resultados/rocs-threshold-0-05.png">
				</section>

				<section data-markdown>
					<script type="text/template">
						### Resultados usando o *threshold* de 0.1
						<!-- - Refizemos a tabela e gráfico para o *threshold* de 0.1 -->
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
						<!-- Número de imagens detectadas (threshold de 0.1) -->
						|          | F5 | Steghide | Outguess | Stepic | LSBSteg |
						|:--------:|:--:|:--------:|:--------:|:------:|:-------:|
						| **0%**   | 8  | 8        | 8        | 1      | 1       |
						| **10%**  | 5  | 7        | 6        | 7      | 8       |
						| **20%**  | 4  | 7        | 8        | 13     | 16      |
						| **30%**  | 6  | 7        | 6        | 20     | 24      |
						| **40%**  | 6  | 9        | 6        | 25     | 29      |
						| **50%**  | 4  | 8        | 7        | 28     | 29      |
						| **60%**  | 3  | 9        | 8        | 29     | 30      |
						| **70%**  | 3  | 8        | 8        | 29     | 30      |
						| **80%**  | 3  | 8        | 6        | 30     | 30      |
						| **90%**  | 2  | 9        | 7        | 30     | 30      |
						| **100%** | 2  | 8        | 3*       | 30     | 30      |
					</script>
				</section>
				<section>
					<img src="resultados/grafico-imagens-detectadas-threshold-0-1.png">
				</section>

				<!-- Gráficos ROC dos métodos -->

				<section data-markdown>
					<script type="text/template">
						### Comparação dos métodos de esteganálise
						- Geramos gráficos ROC para cada programa.
						- Os gráficos mostram o desempenho dos métodos contra cada programa.
						<!-- Explicar o threshold (que é o critério para o processo de classificação) -->
						<!-- Colocar o Listing 3.7 (relatório do StegExpose) -->
					</script>
				</section>
				<section>
					<img src="resultados/roc-lsbsteg.png">
				</section>
				<section>
					<img src="resultados/roc-stepic.png">
				</section>
				<section>
					<img src="resultados/roc-f5.png">
				</section>
				<section>
					<img src="resultados/roc-steghide.png">
				</section>
				<section>
					<img src="resultados/roc-outguess.png">
				</section>
				<section data-markdown>
					<script type="text/template">
						- Os desempenhos são muito parecidos.
						- Difícil de dizer qual é o melhor.
						- Primary Sets parece ter o pior desempenho.
						- A curva do Chi Square provavelmente seria diferente para LSB não-sequencial.
						- Nos testes do StegExpose, a fusão é sempre melhor.
						- O desempenho contra Steghide, Outguess, e F5 foi aleatório.
					</script>
				</section>
				<section>
					<img src="img/stegexpose-roc.png">
				</section>

				<!-- Considerações finais -->

				<section data-markdown>
					<script type="text/template">
						### Considerações finais
						- Este trabalho tem escopo delimitado <!-- em esteganálise LSB. E limitada de ferramentas -->
						- LSB foi o deu a maior taxa de detecção.
						<!-- Não tem motivos para continuar usando LSB. Exitem outros programas. -->
						- Existem métodos para detectar o Outguess e F5.
						- Esteganografia e esteganálise são uma corrida.
					</script>
				</section>

				<!-- Trabalhos Futuros -->

				<section data-markdown>
					<script type="text/template">
						### Trabalhos Futuros
						- Usar um banco de imagens maior e mais variado.
						<!-- Gerando curvas ROCs mais precisas. -->
						- Usar outros tipos de dados: vídeo, áudio, etc.
						- Usar outros programas de esteganografia.
						- Usar outros métodos de esteganálise.
						<!-- Stegdetect e outros. -->
						- Criar implementações Open-Source dos métodos que detectam Outguess e F5.
					</script>
				</section>

				<!-- Finalização -->

				<section data-markdown>
					<script type="text/template">
						### Muito obrigado.

						Perguntas?
					</script>
				</section>

			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>
			// More info https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: false,
				slideNumber: true,
				history: true,
				transition: 'linear',
				// center: false,

				// transitionSpeed: 'default', // default/fast/slow
				// showNotes: true,


				math: {
					// mathjax: 'http://cdn.mathjax.org/mathjax/latest/MathJax.js',
					config: 'TeX-AMS_HTML-full'
				},

				// More info https://github.com/hakimel/reveal.js#dependencies
				dependencies: [
					{ src: 'lib/js/classList.js' },
					{ src: 'plugin/math/math.js', async: true },
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
				]
			});
		</script>
	</body>
</html>
